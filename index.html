<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>jd</title>
		<link rel="stylesheet" href="css/style.css" />
		<link rel="stylesheet" href="font/iconfont.css" />
	</head>
	<body>
		<!-- start: tools-bar -->
		<div class="tools-bar">
			<div class="logo-box">
				<img src="img/logo.png" alt="" />
			</div>
			<div class="search-box">
				<input type="text" class="search-text" placeholder="搜索商品/商家" />
				<input type="button" class="search-btn" value="搜索" />
			</div>
			<div class="cart-box">
				<div class="cart-btn">
					<div class="cart-hover">

						<div class="cart-content">购物车还没有商品，赶快选购吧！</div>
					</div>
					<div class="cart-title">我的购物车</div>
				</div>
			</div>
		</div>
		<!-- end: tools-bar -->
		
		<!-- start: menu-bar -->
		<div class="menu-bar">
			<div class="menu-box">
				<li class="first">全部商品分类</li>
				<li>京东服饰</li>
				<li>美妆馆</li>
				<li>超市</li>
				<li>生鲜</li>
				<li>全球购</li>
			</div>
		</div>
		<!-- end: menu-bar -->
		
		<!-- div.goods-box>div.item*4>(img.g-img)+(div.g-pirce{￥})+(div.g-title)+(div.g-shop)+(div.g-control>div.g-c-btn{对比}+div.g-c-btn{关注}+div.g-c-btn{加入购物车}) -->
		<!-- start: goods-box -->
		<div class="goods-box">
			<div class="item" goodsId="1001" goodsImg="img/001.jpg" price="99" goodsName="小米（MI）小米便携鼠标 深空灰 无线蓝牙4.0 男女生家用 笔记本电脑办公">
				<img src="img/001.jpg" alt="" class="g-img" />
				<div class="g-pirce">￥99.00</div>
				<div class="g-title">小米（MI）小米便携鼠标 深空灰 无线蓝牙4.0 男女生家用 笔记本电脑办公 </div>
				<div class="g-shop">小米京东官方自营旗舰店</div>
				<div class="g-control">
					<div class="g-c-btn">对比</div>
					<div class="g-c-btn">关注</div>
					<div class="g-c-btn">加入购物车</div>
				</div>
			</div>
			<div class="item" goodsId="1002" goodsImg="img/002.jpg" price="129" goodsName="罗技（Logitech）M546（M545）无线鼠标 侧键 双向滚轮">
				<img src="img/002.jpg" alt="" class="g-img" />
				<div class="g-pirce">￥129.00</div>
				<div class="g-title">罗技（Logitech）M546（M545）无线鼠标 侧键 双向滚轮 </div>
				<div class="g-shop">罗技官方旗舰店</div>
				<div class="g-control">
					<div class="g-c-btn">对比</div>
					<div class="g-c-btn">关注</div>
					<div class="g-c-btn">加入购物车</div>
				</div>
			</div>
			<div class="item" goodsId="1003" goodsImg="img/003.jpg" price="99" goodsName="雷柏（Rapoo） 3500Pro 无线鼠标 布艺鼠标 办公鼠标 笔记本鼠标 灰色">
				<img src="img/003.jpg" alt="" class="g-img" />
				<div class="g-pirce">￥99.00</div>
				<div class="g-title">雷柏（Rapoo） 3500Pro 无线鼠标 布艺鼠标 办公鼠标 笔记本鼠标 灰色</div>
				<div class="g-shop">雷柏京东自营官方旗舰店</div>
				<div class="g-control">
					<div class="g-c-btn">对比</div>
					<div class="g-c-btn">关注</div>
					<div class="g-c-btn">加入购物车</div>
				</div>
			</div>
			<div class="item" goodsId="1004" goodsImg="img/004.jpg" price="99" goodsName="ThinkPad 0B47161 无线蓝光鼠标 （磨砂黑） 无线鼠标 ">
				<img src="img/004.jpg" alt="" class="g-img" />
				<div class="g-pirce">￥99.00</div>
				<div class="g-title">ThinkPad 0B47161 无线蓝光鼠标 （磨砂黑） 无线鼠标 </div>
				<div class="g-shop">京东游戏外设自营类目店</div>
				<div class="g-control">
					<div class="g-c-btn">对比</div>
					<div class="g-c-btn">关注</div>
					<div class="g-c-btn">加入购物车</div>
				</div>
			</div>
			
			<div class="item" goodsId="1005" goodsImg="img/005.jpg" price="155" goodsName="雷蛇（Razer）蝰蛇2000 游戏鼠标 黑色版 电竞鼠标 绝地求生鼠标 吃鸡鼠标">
				<img src="img/005.jpg" alt="" class="g-img" />
				<div class="g-pirce">￥155.00</div>
				<div class="g-title">雷蛇（Razer）蝰蛇2000 游戏鼠标 黑色版 电竞鼠标 绝地求生鼠标 吃鸡鼠标 </div>
				<div class="g-shop">雷蛇官方旗舰店</div>
				<div class="g-control">
					<div class="g-c-btn">对比</div>
					<div class="g-c-btn">关注</div>
					<div class="g-c-btn">加入购物车</div>
				</div>
			</div>
			<div class="item" goodsId="1006" goodsImg="img/006.jpg" price="79" goodsName="罗技（Logitech）M275（M280）无线鼠标 舒适曲线 白色">
			<img src="img/006.jpg" alt="" class="g-img" />
			<div class="g-pirce">￥79.00</div>
			<div class="g-title">罗技（Logitech）M275（M280）无线鼠标 舒适曲线 白色</div>
			<div class="g-shop">罗技官方旗舰店</div>
			<div class="g-control">
				<div class="g-c-btn">对比</div>
				<div class="g-c-btn">关注</div>
				<div class="g-c-btn">加入购物车</div>
			</div>
		</div>
			<div class="item" goodsId="1006" goodsImg="img/006.jpg" price="79" goodsName="罗技（Logitech）M275（M280）无线鼠标 舒适曲线 白色">
				<img src="img/006.jpg" alt="" class="g-img" />
				<div class="g-pirce">￥79.00</div>
				<div class="g-title">罗技（Logitech）M275（M280）无线鼠标 舒适曲线 白色</div>
				<div class="g-shop">罗技官方旗舰店</div>
				<div class="g-control">
					<div class="g-c-btn">对比</div>
					<div class="g-c-btn">关注</div>
					<div class="g-c-btn">加入购物车</div>
				</div>
			</div>
			<div class="item" goodsId="1006" goodsImg="img/006.jpg" price="79" goodsName="罗技（Logitech）M275（M280）无线鼠标 舒适曲线 白色">
				<img src="img/006.jpg" alt="" class="g-img" />
				<div class="g-pirce">￥79.00</div>
				<div class="g-title">罗技（Logitech）M275（M280）无线鼠标 舒适曲线 白色</div>
				<div class="g-shop">罗技官方旗舰店</div>
				<div class="g-control">
					<div class="g-c-btn">对比</div>
					<div class="g-c-btn">关注</div>
					<div class="g-c-btn">加入购物车</div>
				</div>
			</div>
			<div class="item" goodsId="1006" goodsImg="img/006.jpg" price="79" goodsName="罗技（Logitech）M275（M280）无线鼠标 舒适曲线 白色">
				<img src="img/006.jpg" alt="" class="g-img" />
				<div class="g-pirce">￥79.00</div>
				<div class="g-title">罗技（Logitech）M275（M280）无线鼠标 舒适曲线 白色</div>
				<div class="g-shop">罗技官方旗舰店</div>
				<div class="g-control">
					<div class="g-c-btn">对比</div>
					<div class="g-c-btn">关注</div>
					<div class="g-c-btn">加入购物车</div>
				</div>
			</div><div class="item" goodsId="1006" goodsImg="img/006.jpg" price="79" goodsName="罗技（Logitech）M275（M280）无线鼠标 舒适曲线 白色">
			<img src="img/006.jpg" alt="" class="g-img" />
			<div class="g-pirce">￥79.00</div>
			<div class="g-title">罗技（Logitech）M275（M280）无线鼠标 舒适曲线 白色</div>
			<div class="g-shop">罗技官方旗舰店</div>
			<div class="g-control">
				<div class="g-c-btn">对比</div>
				<div class="g-c-btn">关注</div>
				<div class="g-c-btn">加入购物车</div>
			</div>
		</div>
			<div class="item" goodsId="1006" goodsImg="img/006.jpg" price="79" goodsName="罗技（Logitech）M275（M280）无线鼠标 舒适曲线 白色">
				<img src="img/006.jpg" alt="" class="g-img" />
				<div class="g-pirce">￥79.00</div>
				<div class="g-title">罗技（Logitech）M275（M280）无线鼠标 舒适曲线 白色</div>
				<div class="g-shop">罗技官方旗舰店</div>
				<div class="g-control">
					<div class="g-c-btn">对比</div>
					<div class="g-c-btn">关注</div>
					<div class="g-c-btn">加入购物车</div>
				</div>
			</div>
			<div class="item" goodsId="1006" goodsImg="img/006.jpg" price="79" goodsName="罗技（Logitech）M275（M280）无线鼠标 舒适曲线 白色">
				<img src="img/006.jpg" alt="" class="g-img" />
				<div class="g-pirce">￥79.00</div>
				<div class="g-title">罗技（Logitech）M275（M280）无线鼠标 舒适曲线 白色</div>
				<div class="g-shop">罗技官方旗舰店</div>
				<div class="g-control">
					<div class="g-c-btn">对比</div>
					<div class="g-c-btn">关注</div>
					<div class="g-c-btn">加入购物车</div>
				</div>
			</div>
			<div class="item" goodsId="1006" goodsImg="img/006.jpg" price="79" goodsName="罗技（Logitech）M275（M280）无线鼠标 舒适曲线 白色">
				<img src="img/006.jpg" alt="" class="g-img" />
				<div class="g-pirce">￥79.00</div>
				<div class="g-title">罗技（Logitech）M275（M280）无线鼠标 舒适曲线 白色</div>
				<div class="g-shop">罗技官方旗舰店</div>
				<div class="g-control">
					<div class="g-c-btn">对比</div>
					<div class="g-c-btn">关注</div>
					<div class="g-c-btn">加入购物车</div>
				</div>
			</div>
			<div class="item" goodsId="1006" goodsImg="img/006.jpg" price="79" goodsName="罗技（Logitech）M275（M280）无线鼠标 舒适曲线 白色">
				<img src="img/006.jpg" alt="" class="g-img" />
				<div class="g-pirce">￥79.00</div>
				<div class="g-title">罗技（Logitech）M275（M280）无线鼠标 舒适曲线 白色</div>
				<div class="g-shop">罗技官方旗舰店</div>
				<div class="g-control">
					<div class="g-c-btn">对比</div>
					<div class="g-c-btn">关注</div>
					<div class="g-c-btn">加入购物车</div>
				</div>
			</div>
			<div class="item" goodsId="1006" goodsImg="img/006.jpg" price="79" goodsName="罗技（Logitech）M275（M280）无线鼠标 舒适曲线 白色">
				<img src="img/006.jpg" alt="" class="g-img" />
				<div class="g-pirce">￥79.00</div>
				<div class="g-title">罗技（Logitech）M275（M280）无线鼠标 舒适曲线 白色</div>
				<div class="g-shop">罗技官方旗舰店</div>
				<div class="g-control">
					<div class="g-c-btn">对比</div>
					<div class="g-c-btn">关注</div>
					<div class="g-c-btn">加入购物车</div>
				</div>
			</div>

		</div>
		<!-- end: goods-box -->
		
		<!-- start: right-menu -->
		<div class="right-menu">
			<ul class="aside-box">
				<li class="icon icon-user">
					<p>京东会员</p>
				</li>
				<li class="icon icon-cart1">
					<p>购物车</p>
					<div class="count">0</div>
				</li>
				<li class="icon icon-heart">
					<p>我的关注</p>
				</li>
				<li class="icon icon-pinglun">
					<p>京东消息</p>
				</li>
				<li class="icon icon-zixun">
					<p>咨询客服</p>
				</li>
			</ul>
			
			<!-- div.cart-box>(div.cart.title)+(div.cart-item>div.ci-img+(div.ci-content>div.ci-content-title+div.ci-content-price))+div.cart-sumbox -->
			<div class="cart-box">
				<div class="cart-title">
					<span class="icon icon-cart1"></span>
					<span class="text">购物车</span>
					<span class="close">关闭</span>
				</div>
				<!--<div class="cart-item">
					<div class="ci-img">
						<img src="img/001.jpg" alt="" />
					</div>
					<div class="ci-content">
						<div class="ci-content-title">雷蛇（Razer）蝰蛇2000 游戏鼠标 黑色版 电竞鼠标 绝地求生鼠标 吃鸡鼠标</div>
						<div class="ci-content-price">
							<div class="info">
								<span class="price">￥79.00</span>*<span class="count">1</span>
							</div>
							<div class="control">
								<span class="diff">-</span>
								<span class="add">+</span>
							</div>
							<div class="del">删除</div>
						</div>
					</div>
				</div>-->
				<div class="cart-footer">
					<div class="text">
						<div class="count"><span class="val">0</span>&nbsp;件商品</div>
						<div class="price">共计：￥<span class="val">0</span></div>
					</div>
					<div class="control">
						<div class="btn">去购物车结算</div>
					</div>
				</div>
			</div>
		</div>
		<!-- end: right-menu -->
		
		<script src="js/jquery-3.3.1.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/goods.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/store.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			$(function(){
				// 顶部购物车按钮鼠标移入/出事件
				$(".cart-title").hover(function(){
					$(".cart-content").show()
				},function(){
					$(".cart-content").hide()
				})
				
				// 右侧菜单
				let menuPulled = false;
				function toggleRightMenu(){
					$('.right-menu').stop();
					let action = menuPulled ? {right: '-265px'} : {right: '0px'};
					menuPulled = !menuPulled;

					$('.right-menu ul li').removeClass('active');
					if(menuPulled){
						$('.right-menu ul li:eq(1)').addClass('active');

					}
					$('.right-menu').animate( action , 500);
				}
				$('.right-menu ul li:eq(1)').click(function(){
					toggleRightMenu();
				});
				$('.right-menu .cart-box .cart-title .close').click(function(){
					toggleRightMenu();
				});
				
				
				$('.right-menu ul li').hover(function(){
					$(this).stop();
					if(!menuPulled){
						$(this).find('p')
							.css({backgroundColor: '#C81623',display: 'block'})
							.animate({marginLeft: '-65px'});
					}
				}, function(){
					$(this).stop();
					$(this).find('p')
						.css({backgroundColor: '#7A6E6E'})
						.animate({marginLeft: '0px'},function(){
							$(this).hide();
						});
				});
				
				// 右侧购物车商品项鼠标移入
//				$('.right-menu .cart-box .cart-item').hover(function(){
//					$(this).find('.control').show();
//					$(this).find('.del').show();
//				},function(){
//					$(this).find('.control').hide();
//					$(this).find('.del').hide();
//				});
				
				
				
				
				$('.goods-box .item .g-control').find('.g-c-btn:eq(2)').click(function(e){
					let $item = $(this).parents('.goods-box>.item');
					let goods = new Goods($item.attr('goodsId'), $item.attr('goodsName'),$item.attr('goodsImg'), Number($item.attr('price')) );
					myStore.orders.add(goods);
					
					// 添加动画效果
					let $cartTip = $(`<div class="cartTip"></div>`).appendTo($(this)).css({
//						clientY是当前鼠标的点击位置但是如果页面滚动的话获取的位置是不会计算当前滚动的距离所以加上页面滚动的距离document.documentElement.scrollLeft
						top:e.clientY+document.documentElement.scrollTop,
						left: e.clientX+document.documentElement.scrollLeft
					});
					console.log(e.clientX+document.documentElement.scrollLeft+"====="+ e.clientY+document.documentElement.scrollTop )
					let $targetCart = $('.right-menu .aside-box .icon-cart1 .count');
					$cartTip.animate({
						top: $targetCart.offset().top,
						left: $targetCart.offset().left
					}, 'slow', function(){
						$(this).remove();
					});
				});
				
			});
			
			
		</script>
	</body>
</html>
